<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Mark Brown Tuition - Asking for Validated Input</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="/theme/css/structure.css?q=" />
    <link rel="stylesheet" type="text/css" href="/theme/css/icons.css?q=" />
    <link rel="stylesheet" type="text/css" href="/theme/css/style.css?q=" />
    <link rel="stylesheet" type="text/css" href="/theme/css/monokai.min.css" />
    <link rel="icon" type="image/svg+xml" href="/images/favicon.svg">
    <link rel="alternate icon" href="/images/favicon.ico">




<meta name="tags" content="python" />
<meta name="tags" content="gcse" />
<meta name="tags" content="coding" />
  </head>
  <body>
    <div id="header" class="stack center">
<navbar class="cluster">
  <div>
  <nav class="center">
    <a href="/about-me">About Me</a>
    <a href="/testimonials">Testimonials</a>
    <a href="/resources">Resources</a>
  </div>
  </nav>
</navbar>      <h1><a class="halfwidth" href="/">Mark Brown Tuition</a></h1>
      <h3 class="subtitle center halfwidth">
Independent Private Tuition in Physics, Mathematics & Computer Science
</h3>
<address class="cluster">
  <div class="switcher center">
    <a class='icon' alt=email class="sc-email" href="mailto:contact@markbrowntuition.co.uk" target="_blank">
      <img src="/images/icons/email.svg"> email
    </a>
    <a class='icon' alt=facebook class="sc-facebook" href="https://www.facebook.com/markbrowntuition" target="_blank">
      <img src="/images/icons/facebook.svg"> facebook
    </a>
    <a class='icon' alt=superprof class="sc-superprof" href="https://www.superprof.co.uk/maths-physics-computer-science-programming-online-slots-available-monday-thursday-for-2023-2024-academic-year.html" target="_blank">
      <img src="/images/icons/superprof.svg"> superprof
    </a>
  </div>
</address><div id="sinc">
<svg name="sinc" version="1.1" viewBox="0 0 94.653 14.524" xmlns="http://www.w3.org/2000/svg">
      <g transform="translate(-27.67 -105.72)">
        <path d="m29.997 113.21c0.47619-1e-3 0.95238-2e-3 1.4286-3.4e-4 0.47619 1e-3 0.95238 5e-3 1.4286 0.0102 0.47619 5e-3 0.95238 0.0131 1.4286 0.0211 0.47619 8e-3 0.95238 0.0161 1.4286 0.0204 0.47619 4e-3 0.95238 5e-3 1.4286-3e-3 0.47619-7e-3 0.95238-0.0228 1.4286-0.0454 0.47619-0.0226 0.95238-0.0524 1.4286-0.0808 0.47619-0.0285 0.95238-0.0552 1.4286-0.0664 0.47619-0.0112 0.95238-6e-3 1.4286 0.0246 0.47619 0.0306 0.95238 0.0876 1.4286 0.16284 0.47619 0.0752 0.95238 0.16863 1.4286 0.25079 0.47619 0.0822 0.95238 0.15144 1.4286 0.17094 0.47619 0.0195 0.95238-0.0133 1.4286-0.11307 0.47619-0.0998 0.95238-0.26801 1.4286-0.47084s0.95238-0.43873 1.4286-0.62912c0.47619-0.1904 0.95238-0.33072 1.4286-0.34408 0.47619-0.0134 0.95238 0.10514 1.4286 0.36346 0.47619 0.25832 0.95238 0.65747 1.4286 1.0996 0.47619 0.44215 0.95238 0.92202 1.4286 1.275 0.47619 0.35295 0.95238 0.56963 1.4286 0.52892 0.47619-0.0407 0.95238-0.34569 1.4286-0.88027 0.47619-0.5346 0.95238-1.2967 1.4286-2.0761 0.47619-0.77936 0.95238-1.5642 1.4286-2.0847 0.47619-0.52044 0.95238-0.76226 1.4286-0.58873 0.47619 0.17353 0.95238 0.76834 1.4286 1.6561 0.47619 0.8878 0.95238 2.0601 1.4286 3.1704 0.47619 1.1103 0.95238 2.1401 1.4286 2.745 0.47619 0.60492 0.95238 0.76925 1.4286 0.40036s0.95238-1.2718 1.4286-2.458c0.47619-1.1862 0.95238-2.6398 1.4286-3.9176 0.47619-1.2778 0.95238-2.358 1.4286-2.9036 0.47619-0.54555 0.95238-0.54452 1.4286 0 0.47619 0.54452 0.95238 1.6262 1.4286 2.9036 0.47619 1.2774 0.95238 2.7309 1.4286 3.9176 0.47619 1.1867 0.95238 2.0881 1.4286 2.458 0.47619 0.3699 0.95238 0.20374 1.4286-0.40036 0.47619-0.6041 0.95238-1.6349 1.4286-2.745 0.47619-1.1102 0.95238-2.2821 1.4286-3.1704 0.47619-0.88833 0.95238-1.4818 1.4286-1.6561 0.47619-0.17432 0.95238 0.0688 1.4286 0.58873 0.47619 0.51991 0.95238 1.3053 1.4286 2.0847 0.47619 0.77936 0.95238 1.5411 1.4286 2.0761 0.47619 0.53501 0.95238 0.83906 1.4286 0.88027 0.47619 0.0412 0.95238-0.17622 1.4286-0.52892 0.47619-0.35269 0.95238-0.83275 1.4286-1.275 0.47619-0.44223 0.95238-0.84105 1.4286-1.0996 0.47619-0.25859 0.95238-0.37657 1.4286-0.36346 0.47619 0.0131 0.95238 0.15377 1.4286 0.34408 0.47619 0.1903 0.95238 0.42622 1.4286 0.62912 0.47619 0.20289 0.95238 0.37092 1.4286 0.47084 0.47619 0.0999 0.95238 0.13246 1.4286 0.11307 0.47619-0.0194 0.95238-0.0888 1.4286-0.17094 0.47619-0.0821 0.95239-0.17551 1.4286-0.25079 0.47619-0.0753 0.95238-0.13215 1.4286-0.16284 0.47619-0.0307 0.95238-0.0358 1.4286-0.0246s0.95238 0.0379 1.4286 0.0664 0.95238 0.0583 1.4286 0.0808c0.47619 0.0226 0.95238 0.038 1.4286 0.0454 0.47619 7e-3 0.95238 7e-3 1.4286 3e-3s0.95239-0.0125 1.4286-0.0204c0.47619-8e-3 0.95238-0.0156 1.4286-0.0211 0.47619-5e-3 0.95238-9e-3 1.4286-0.0102 0.47619-1e-3 0.95238-8.2e-4 1.4286 3.4e-4" fill="none" stroke="#3ebddb" stroke-linecap="round" stroke-width="1px" title="sinc"/>
    </g></svg>
  </div>    </div>
    <content>
<header>
  <h2><a href="/resources/programming-with-python/2017/11/08/asking-for-validated-input"
      title="Permalink to Asking for Validated Input">Asking for Validated Input    </a>
  </h2>
  <div class="cluster">
    <div>
      <p>Written on <time datetime="2017-11-08T00:00:00+00:00">Wed 08 November 2017</time></p>

      <div class='cluster'>
        <div>
          <a class="tag" href="/tag/python.html">python</a>
          <a class="tag" href="/tag/gcse.html">gcse</a>
          <a class="tag" href="/tag/coding.html">coding</a>
        </div>
      </div>

    </div>
  </div>
</header>  <p>In many cases we will want to ask the user for input.
Generally we want to make sure the user has entered something helpful.
In this post we will describe one way to accomplish this.
We will break this task down into three parts:</p>
<ol class="arabic simple">
<li>Asking for the input</li>
<li>Rejecting invalid input</li>
<li>How to ask again</li>
</ol>
<div class="section" id="asking-for-a-number">
<h2>Asking for a number</h2>
<p>Let's begin by asking the user for any number between 1 and 10 inclusive.</p>
<div class="highlight"><pre><span></span><span class="n">some_number</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Please enter a number between 1 and 10 inclusive &gt;&gt; &quot;</span><span class="p">))</span>
</pre></div>
<p>This is fine but it's generally bad practice to hard-code numbers into our code.
We will alter the above to become</p>
<div class="highlight"><pre><span></span><span class="n">lower</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">higher</span> <span class="o">=</span> <span class="mi">10</span>

<span class="n">question_to_ask</span> <span class="o">=</span> <span class="s2">&quot;Please enter a number between </span><span class="si">{}</span><span class="s2"> and </span><span class="si">{}</span><span class="s2"> &gt;&gt; &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lower</span><span class="p">,</span> <span class="n">higher</span><span class="p">)</span>
<span class="n">some_number</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="n">question_to_ask</span><span class="p">))</span>
</pre></div>
<p>In this we have used <a class="reference external" href="/resources/programming-with-python/2017/11/10/fancy-printing-with-python">string formatting</a>.
Using the variables lower and higher we can now test the user's input</p>
<div class="highlight"><pre><span></span><span class="n">lower</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">higher</span> <span class="o">=</span> <span class="mi">10</span>

<span class="n">question_to_ask</span> <span class="o">=</span> <span class="s2">&quot;Please enter a number between </span><span class="si">{}</span><span class="s2"> and </span><span class="si">{}</span><span class="s2"> &gt;&gt; &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lower</span><span class="p">,</span> <span class="n">higher</span><span class="p">)</span>
<span class="n">some_number</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="n">question_to_ask</span><span class="p">))</span>

<span class="k">if</span> <span class="n">some_number</span> <span class="o">&lt;</span> <span class="n">lower</span> <span class="ow">or</span> <span class="n">some_number</span> <span class="o">&gt;</span> <span class="n">higher</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This number isn&#39;t within the range!&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This number is within the range!&quot;</span><span class="p">)</span>
</pre></div>
<p>Great!
This will correctly make sure the user enters a number within the range.
Let's tidy this up into a function like so</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">ask_for_a_number</span><span class="p">(</span><span class="n">lower</span><span class="p">,</span> <span class="n">higher</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Asks user for a number between lower and higher inclusive</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">question_to_ask</span> <span class="o">=</span> <span class="s2">&quot;Please enter a number between </span><span class="si">{}</span><span class="s2"> and </span><span class="si">{}</span><span class="s2"> &gt;&gt; &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lower</span><span class="p">,</span> <span class="n">higher</span><span class="p">)</span>
    <span class="n">some_number</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="n">question_to_ask</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">some_number</span> <span class="o">&lt;</span> <span class="n">lower</span> <span class="ow">or</span> <span class="n">some_number</span> <span class="o">&gt;</span> <span class="n">higher</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This number isn&#39;t within the range!&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This number is within the range!&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">some_number</span>


<span class="n">answer</span> <span class="o">=</span> <span class="n">ask_for_a_number</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The user entered </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">answer</span><span class="p">))</span>
</pre></div>
<p>Lovely. Our code successfully asks for a number and tests whether it is within the specified range.
Even better we've cleverly put the return inside the IF so only valid numbers will be returned.
Not entering a valid number will cause</p>
<pre class="doctest-block">
&gt;&gt;&gt;
  Please enter a number between 1 and 10 &gt;&gt; 11
  This number isn't within the range!
  The user entered None
</pre>
<p><em>None</em> can be useful but for our purposes this isn't good enough.
We want to ask the user again.</p>
</div>
<div class="section" id="asking-again-and-again-and-again">
<h2>Asking Again (and again and again ...)</h2>
<p>What we need is a loop.
Let's say we're pretty vindictive and the user won't be allowed to continue unless they give us valid input.
So we want an infinite loop.
We then want to escape this loop if and only if the user gives us a valid answer.
Let's add a loop to our above code</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">ask_for_a_number</span><span class="p">(</span><span class="n">lower</span><span class="p">,</span> <span class="n">higher</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Asks user for a number between lower and higher inclusive</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">question_to_ask</span> <span class="o">=</span> <span class="s2">&quot;Please enter a number between </span><span class="si">{}</span><span class="s2"> and </span><span class="si">{}</span><span class="s2"> &gt;&gt; &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lower</span><span class="p">,</span> <span class="n">higher</span><span class="p">)</span>
        <span class="n">some_number</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="n">question_to_ask</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">some_number</span> <span class="o">&lt;</span> <span class="n">lower</span> <span class="ow">or</span> <span class="n">some_number</span> <span class="o">&gt;</span> <span class="n">higher</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This number isn&#39;t within the range!&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">some_number</span>

<span class="n">answer</span> <span class="o">=</span> <span class="n">ask_for_a_number</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The user entered </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">answer</span><span class="p">))</span>
</pre></div>
<p>Great all done.
When users enter numbers outside this range the next iteration of the loop will begin.
In the above the only way to leave the loop is the return statement.</p>
<p>This is good enough for some purposes but not ours!
We want to reject all invalid inputs.
To do this we will need to cover a new concept.</p>
</div>
<div class="section" id="it-s-better-to-ask-for-forgiveness-than-permission">
<h2>It's better to ask for forgiveness than permission</h2>
<p>We cannot force the user to enter just numbers (short of removing most of the keyboard keys).
Therefore we need to catch when they accidentally or otherwise enter something silly.
For instance using our current function if the user enters <em>potato</em> we will get</p>
<pre class="doctest-block">
&gt;&gt;&gt;
  Please enter a number between 1 and 10 &gt;&gt; potato
</pre>
<div class="errorcodeoutput line-block">
<div class="line">Traceback (most recent call last):</div>
<div class="line-block">
<div class="line">File &quot;/home/mark/tmp.py&quot;, line 15, in &lt;module&gt;</div>
<div class="line-block">
<div class="line">answer = ask_for_a_number(1, 10)</div>
</div>
<div class="line">File &quot;/home/mark/tmp.py&quot;, line 8, in ask_for_a_number</div>
<div class="line-block">
<div class="line">some_number = float(input(question_to_ask))</div>
</div>
</div>
<div class="line">ValueError: could not convert string to float: 'potato'</div>
</div>
<p>Hopefully the unability for float() to turn <em>potato</em> into a number doesn't surprise you.
What we need is some way to catch this error and tell the computer its just the user being and idiot and ignore them.
For that we need the TRY-EXCEPT.
Consider the simple example below</p>
<div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
  <span class="n">infinite_division</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">/</span> <span class="mi">0</span>
<span class="k">except</span> <span class="ne">ZeroDivisionError</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;That&#39;s crazy stop that!&quot;</span><span class="p">)</span>
</pre></div>
<p>Here the code inside the try indent is run.
If it fails with a ZeroDivisionError, it will run the except block.
In this way the program won't crash and it will keep going.
For our code we need to reject inputs that aren't numbers.
As we showed above, this is a ValueError.
So we will alter our code above to take this account</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">ask_for_a_number</span><span class="p">(</span><span class="n">lower</span><span class="p">,</span> <span class="n">higher</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">  Asks user for a number between lower and higher inclusive</span>
<span class="sd">  &quot;&quot;&quot;</span>

  <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
      <span class="n">question_to_ask</span> <span class="o">=</span> <span class="s2">&quot;Please enter a number between </span><span class="si">{}</span><span class="s2"> and </span><span class="si">{}</span><span class="s2"> &gt;&gt; &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lower</span><span class="p">,</span> <span class="n">higher</span><span class="p">)</span>
      <span class="n">some_number</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="n">question_to_ask</span><span class="p">)</span>
      <span class="k">try</span><span class="p">:</span>
          <span class="n">some_number</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">some_number</span><span class="p">)</span>
      <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
          <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> is not a number!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">some_number</span><span class="p">))</span>
          <span class="k">continue</span>

      <span class="k">if</span> <span class="n">some_number</span> <span class="o">&lt;</span> <span class="n">lower</span> <span class="ow">or</span> <span class="n">some_number</span> <span class="o">&gt;</span> <span class="n">higher</span><span class="p">:</span>
          <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This number isn&#39;t within the range!&quot;</span><span class="p">)</span>
      <span class="k">else</span><span class="p">:</span>
          <span class="k">return</span> <span class="n">some_number</span>

<span class="n">answer</span> <span class="o">=</span> <span class="n">ask_for_a_number</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The user entered </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">answer</span><span class="p">))</span>
</pre></div>
<p>Note that we've moved the float conversion and added the try except cases.
The above is now essentially complete.
We've rejected invalid inputs - both by tests and by type.
Whilst not perfect (the above has at least one bug!)</p>
<p>Let's explore the Try-Except a bit more with a different input from the user.</p>
</div>
<div class="section" id="asking-the-user-for-a-valid-date">
<h2>Asking the user for a valid date</h2>
<p>The biggest advantage of using Try-Except is that we don't actually care how the error is thrown.
We just care that we caught it.
In this way we can use other people's code for our purposes if they have raised errors.
For instance let's say we want to ask the user for a date but it must be a weekday.
So for example we want both 8/11/2017 and 11/11/2017 to pass as dates.
However we want 11/11/2017 to fail as it is a Saturday.
Whilst we could do this from scratch, this would be far far too much work for such a simple task.</p>
<p>In many cases in Python there will be a library to help us.
There are two options available.</p>
<p><em>datetime</em> is part of the standard library and so we may prefer to use this as it will just work.
In this case if we're sure of the format the user will enter the dates we may simply use something like</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="n">new_date</span> <span class="o">=</span> <span class="s1">&#39;11/11/2017&#39;</span>

<span class="n">new_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="s1">&#39;11/11/2017&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%d</span><span class="s1">/%m/%Y&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">new_date</span><span class="p">)</span>
</pre></div>
<p>With <em>dateutil</em> the Parser will guess the format rather than use having to specify it.
For example</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dateutil</span> <span class="kn">import</span> <span class="n">parser</span>

<span class="n">new_date</span> <span class="o">=</span> <span class="s1">&#39;11/11/2017&#39;</span>

<span class="n">new_date</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">new_date</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">new_date</span><span class="p">)</span>
</pre></div>
<p>Even though we will need to install <em>dateutil</em>, it is going to be much easier from a user perspective to use.
Okay so how do we figure out what error we need to catch to prevent an invalid date being passed?
Simplest way is simply to trigger the error!</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dateutil</span> <span class="kn">import</span> <span class="n">parser</span>

<span class="n">new_date</span> <span class="o">=</span> <span class="s1">&#39;29/02/2017&#39;</span>  <span class="c1"># Hint - it&#39;s not a leap year!</span>

<span class="n">new_date</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">new_date</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">new_date</span><span class="p">)</span>
</pre></div>
<p>will give something like</p>
<pre class="doctest-block">
&gt;&gt;&gt;
  Traceback (most recent call last):
  File &quot;/home/mark/tmp.py&quot;, line 5, in &lt;module&gt;
    new_date = parser.parse(new_date)
  File &quot;/usr/lib/python3/dist-packages/dateutil/parser.py&quot;, line 1008, in parse
    return DEFAULTPARSER.parse(timestr, **kwargs)
  File &quot;/usr/lib/python3/dist-packages/dateutil/parser.py&quot;, line 404, in parse
    ret = default.replace(repl**)
  ValueError: day is out of range for month
</pre>
<p>Great so we can alter our code to become</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dateutil</span> <span class="kn">import</span> <span class="n">parser</span>

<span class="n">new_date</span> <span class="o">=</span> <span class="s1">&#39;29/02/2017&#39;</span>  <span class="c1"># Hint - it&#39;s not a leap year!</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">new_date</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">new_date</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">new_date</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Invalid date!:&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</pre></div>
<p>Note how we use the as e to catch the specific error thrown by the parser.
This way we can tell the user precisely what they did wrong!</p>
<p>So let's ask the user for a date and get a try-except clause to trigger on a ValueError.
Here's code that will perform this task</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dateutil</span> <span class="kn">import</span> <span class="n">parser</span>

<span class="k">def</span> <span class="nf">ask_for_a_weekday_date</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Asks for a valid date that happens to be a weekday</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">question_to_ask</span> <span class="o">=</span> <span class="s2">&quot;Please enter a date &gt;&gt; &quot;</span>

    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
      <span class="n">new_date</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="n">question_to_ask</span><span class="p">)</span>
      <span class="k">try</span><span class="p">:</span>
        <span class="n">new_date</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">new_date</span><span class="p">)</span>
      <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Invalid date!:&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
        <span class="k">continue</span>

      <span class="k">if</span> <span class="n">new_date</span><span class="o">.</span><span class="n">weekday</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">:</span>  <span class="c1"># 5 and 6 correspond to saturday and sunday</span>
        <span class="k">return</span> <span class="n">new_date</span>
      <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This isn&#39;t a weekday!&quot;</span><span class="p">)</span>
</pre></div>
<p>Here we are using the weekday() function.
This will return 0 to 6 depending on the day of the week, pretty neat!</p>
</div>
<div class="section" id="summary">
<h2>Summary</h2>
<p>Ensuring the user enters valid input is essential for keeping our code from crashing in various inconvenient ways.
In this post we've covered a pattern to perform this task and explored this using numbers and dates.</p>
</div>
<div class="section" id="questions">
<h2>Questions</h2>
<ol class="arabic simple">
<li>The validate_number function will fail for some values of lower and higher. How can we alter the code to prevent this?</li>
<li>In pseudo-code can you outline the abstract pattern for input, rejecting invalid types and rejecting input that fails tests?</li>
<li>Write code that will reject invalid IP addresses.</li>
<li>Ask for N letter works containing a vowel.</li>
<li>(Harder) Write the abstract function that takes invalid types and tests as inputs.</li>
</ol>
</div>



    </content>

    <footer class="center stack">
      <p>(C) 2024 Mark Brown Private Tuition</p>
    </footer>
  </body>
</html>